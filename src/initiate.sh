#!/bin/bash

echo "###################################################################################"
echo "initiation started"
echo "###################################################################################"


echo "###################################################################################"
echo "redis works"
echo "###################################################################################"



echo "###################################################################################"
echo "mysql works"
echo "###################################################################################"


echo "###################################################################################"
echo "wackcap database created"
echo "###################################################################################"

echo "###################################################################################"
echo "install npm packages"
echo "###################################################################################"

cd /var/www/app
npm install

echo "###################################################################################"
echo "run migrations and seeds"
echo "###################################################################################"

cd /var/www/app/services/users
wait
npx sequelize db:migrate
wait 
npx sequelize db:seed:all
wait
cd /var/www/app/services/conversations
wait
npx sequelize db:migrate

echo "###################################################################################"
echo "good job every thing working well"
echo "###################################################################################"

echo "###################################################################################"
echo "use this url http://localhost:3000/register"
echo "###################################################################################"

npm start

